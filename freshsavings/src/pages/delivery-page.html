<!DOCTYPE html>

<head>
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
  <meta charset="utf-8">
  <title>Delivery Option</title>

  <!-- bootstrap JS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="...PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

  <!-- flatpickr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

</head>

<body>
  <div id="navbarPlaceholder"></div>

  <section class="h-100">
    <div class="container py-5 h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-lg-12">

          <hr />
          <div class="row">
            <div class="col-lg-7">
              <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                  <p>Delivery Options</p>
                </div>
              </div>

              <!-- Self Pickup Radio Button -->
              <div class="card mb-3">
                <div class="card-header">
                  <div class="form-check">
                    <label class="btn btn-lg btn-default">
                      <input type="radio" class="form-check-input" id="radio1" name="optradio" value="pickup"
                        data-toggle="collapse" data-target="#pickup" aria-expanded="true" aria-controls="pickup">
                      <label class="form-check-label" for="radio1">Self Pickup (Free)</label>
                    </label>
                  </div>
                </div>
                <!-- Collapsible panel -->
                <div id="pickup" class="collapse">
                  <div class="card-body">
                    <div id="map"></div>
                    <div>
                      <p>{Store Name}</p>
                      <p>{Seller's Address}</p>
                      <p>{Opening Hours}</p>
                    </div>
                    <div>
                      <p>
                        Choose a pickup time!
                      </p>
                    </div>
                    <!-- Calendar -->
                    <form>
                      <input class="form-control" type="datetime-local" placeholder="Select Date & Time">
                    </form>


                  </div>
                </div>
              </div>

              <!-- Delivery Radio Button -->
              <div class="card mb-3">
                <div class="card-header">
                  <div class="form-check">
                    <label class="btn btn-lg btn-default">
                      <input type="radio" class="form-check-input" id="radio2" name="optradio" value="deliver"
                        data-toggle="collapse" data-target="#delivery" aria-expanded="true" aria-controls="delivery">
                      <label class="form-check-label" for="radio2">Doorstep Delivery ($20)</label>
                    </label>
                  </div>
                </div>
                <!-- Collapsible panel -->
                <div id="delivery" class="collapse">
                  <div class="card-body">
                    <!-- Need to fix alignment @waiwenc -->
                    <label class="btn btn-lg btn-default container">
                      <input type="radio" class="form-check-input" id="address1" name="optradio" value="home" checked>
                      <label class="form-check-label" for="address1">
                        <div class="d-flex mb-4">
                          <div class="card-text" style="text-align: left;">
                            <p style="justify-content: flex-start">
                              <span>Home</span>
                              <a href="#" class="text-body justify-content-right">Edit</a>
                            </p>
                            <p>
                              {Name}
                              <span class="text-body">| {Contact Number}</span>
                            </p>
                            <p>{Address}</p>
                          </div>
                        </div>
                      </label>
                    </label>

                    <button class="btn btn-primary"
                      style="display:flex; justify-content: center; margin-left:auto; margin-right: auto;">
                      <a href="#">
                        <p style="color: white;">Enter new address</p>
                      </a></button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Side Box for Total Sales-->
            <div class="col-md-5">
              <div class="payment-page">
                <div class="d-flex justify-content-between information"><span>Subtotal</span><span>$3000.00</span></div>
                <div class="d-flex justify-content-between information"><span>Shipping</span><span>$20.00</span></div>
                <div class="d-flex justify-content-between information">
                  <span>Total(Incl. taxes)</span>
                  <span>$3020.00</span>
                </div>
                <button class="btn btn-primary btn-block d-flex justify-content-between mt-3" type="button">
                  <span>
                    Payment
                  </span>
                </button>
              </div>
            </div>



            <script>
              // Fetch and insert navbar content
              fetch('./components/navbar.html')
                .then(response => response.text())
                .then(data => {
                  document.getElementById('navbarPlaceholder').innerHTML = data;
                });

              // for collapse and uncollapsed buttons
              $('#pictureTarifa, #tarifaHorarios').collapse('hide');
              $('input[name="radios"]').change(function () {
                if ($('#pictureTar').is(":checked")) {
                  $('#pictureTarifa').collapse('show');
                } else {
                  $('#pictureTarifa').collapse('hide');
                }
                if ($('#tarifaHor').is(":checked")) {
                  $('#tarifaHorarios').collapse('show');
                } else {
                  $('#tarifaHorarios').collapse('hide');
                }
                if ($('#radio3').is(":checked")) {
                  $('#pictureTarifa').collapse('hide');
                  $('#tarifaHorarios').collapse('hide');
                }
              });
            </script>

            <!-- Bootstrap core JS-->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
            <!-- Core theme JS-->
            <script src="js/cart.js"></script>
            <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
            <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

            <!-- flatpickr -->
            <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
            <script>
              config = {
                enableTime: true,
                dateFormat: "Y-m-d H:i",
                altInput: true,
                altFormat: "F j, Y",
                dateFormat: "Y-m-d",
              }
              flatpickr("#input[type=datetime-local]", config)
            </script>

</body>

</html>

<!-- 
  <head>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script>
      var map, infoWindow;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: -34.397, lng: 150.644},
          zoom: 6
        });
        // info window is the one showing "Location found" message
        infoWindow = new google.maps.InfoWindow;

        console.log(navigator.geolocation);
        // this attempts to get user permission to access location
        // Try HTML5 geolocation.
        if (navigator.geolocation) {
          //https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition
          navigator.geolocation.getCurrentPosition(function(position) {
            var pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };
            // set user position to infoWindow
            infoWindow.setPosition(pos);
            infoWindow.setContent('Location found.');
            infoWindow.open(map);
            map.setCenter(pos);
          }, function() {
            handleLocationError(true, infoWindow, map.getCenter());
          });
        } else { // error handling
          // Browser doesn't support Geolocation
          handleLocationError(false, infoWindow, map.getCenter());
        }
      }

      function handleLocationError(browserHasGeolocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeolocation ?
                              'Error: The Geolocation service failed.' :
                              'Error: Your browser doesn\'t support geolocation.');
        infoWindow.open(map);
      }
    </script>
     load the map asynchronously, i.e., load data soon as it becomes available 
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC_qUafRGiice8SqQAUqWFFhxsTuja4enU&callback=initMap"
    async defer></script>
  </body>
</html> -->